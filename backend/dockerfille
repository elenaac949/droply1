# backend/Dockerfile.dev
FROM node:20-alpine

WORKDIR /app

# Instalar nodemon globalmente (para hot-reloading en desarrollo)
RUN npm install -g nodemon

# Copiar archivos de dependencias primero para aprovechar cach√© de Docker
COPY package*.json ./

# Instalar dependencias del proyecto
RUN npm install

# Copiar el resto de los archivos del backend
COPY . .

# Exponer puertos (app + debug)
EXPOSE 3000 9229

# Comando para desarrollo (usa nodemon)
CMD ["npm", "run", "dev"]