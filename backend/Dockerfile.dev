FROM node:20-alpine

WORKDIR /app

# Instalar nodemon como dependencia de desarrollo (mejor pr치ctica que global)
RUN npm install --save-dev nodemon

COPY package*.json ./
RUN npm install -g nodemon && npm install --include=dev # Instala solo dependencias de producci칩n (usa npm ci en producci칩n)
COPY . .

EXPOSE 3000 9229

# Usa npx para ejecutar nodemon sin instalaci칩n global
CMD ["npx", "nodemon", "--inspect=0.0.0.0", "index.js"]